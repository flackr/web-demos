<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Photo gallery</title>
    <style>
      @keyframes scale-down {
        0% {
          scale: 0.7;
        }
      }
      @keyframes hide {
        0% {
          display: block;
        }
        100% {
          opacity: 0;
          display: none;
        }
      }
      #overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        overflow: auto;
        overscroll-behavior: none;
        scroll-snap-type: both mandatory;
        scrollbar-width: none;
        
        &.hide {
          animation: hide 300ms;
          display: none;
        }

        & .dismiss {
          height: 20%;
          margin-top: 50%;
          position: relative;
          /* Align with scroller */
          left: 30%;
          scroll-snap-align: start center;
        }
        
        & .scroller {
          overflow: auto;
          background: white;
          height: 100%;
          width: 100%;
          margin: 30% 30% 0 30%;
          /* Broken? */
          scroll-initial-target: auto;
          scroll-snap-align: center;
          animation: scale-down linear;
          animation-timeline: view();
          animation-range: entry;
          
          & img {
            width: 100%;
          }
        }
      }
      
      body {
        background: beige;
      }
      
      .main {
        max-width: 720px;
        margin: 1rem auto;
        padding: 8px 20px;
        border-radius: 20px;
        box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.5);
        background: white;
      }
      
      .grid {
        display: grid;
        grid-template-columns: repeat( auto-fit, minmax(125px, 1fr) );
      }

      img {
        width: 100%;
      }
      
      .card {
        padding: 1rem;
      }
      
      .card.short {
        grid-row: span 1;                                             /* 5 */
      }
      .card.tall {
        grid-row: span 2;
      }

      .controls {
        position: sticky;
        padding-right: 1rem;
        padding-top: 1rem;
        top: 0;
        text-align: end;
      }
      button.close {
        transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        --tw-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        --tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);
        box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
        --tw-text-opacity: 1;
        color: rgb(107 114 128 / var(--tw-text-opacity, 1));
        padding: 0.5rem;
        border-radius: 50%;
        cursor: pointer;
        
        & svg {
          width: 1.5rem;
          height: 1.5rem;
          display: block;
        }
      }
    </style>
  </head>
  <body>
    <div id="overlay" class="hide">
      <div class="dismiss"></div>
      <div class="scroller">
        <div class="controls">
          <button onclick="closeSheet()" aria-label="Close" class="close">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>

        </div>
        <h2 class="source"></h2>
        <img>
        <div class="caption"></div>        
        <h3>Extra details about the photo</h1>
        <p>Photo by Jane Doe on Unsplash using SLR camera</p>
        <p>This is the view of the photo with additional details and perhaps similar photos?</p>
        <h3>Similar photos</h3>
        <div class="color-card"></div>
        <div class="color-card"></div>
        <div class="color-card"></div>
        <div class="color-card"></div>
        <div class="color-card"></div>
        <div class="color-card"></div>
        <div class="color-card"></div>
        <div class="color-card"></div>
        <div class="color-card"></div>
        <div class="color-card"></div>
        <div class="color-card"></div>
        <div class="color-card"></div>
        <div class="color-card"></div>
        <div class="color-card"></div>
        <div class="color-card"></div>
        <div class="color-card"></div>
        <div class="color-card"></div>
        <div class="color-card"></div>
      </div>
    </div>
    <div class="main">
      <h1>Photo results for Paris</h1>
      <div class="grid">
        <div class="card tall">
          <img src="https://images.unsplash.com/photo-1581683705068-ca8f49fc7f45?q=80&w=1887&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Paris">
          <div class="caption">Cozy paris eatery</div>
          <div class="source">Unsplash</div>
        </div>
        <div class="card tall">
          <img src="https://images.unsplash.com/photo-1609971757431-439cf7b4141b?q=80&w=2187&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Paris">
          <div class="caption">Cozy paris eatery</div>
          <div class="source">Unsplash</div>
        </div>
        <div class="card tall">
          <img src="https://images.unsplash.com/photo-1650765931316-3033ca92409b?q=80&w=2032&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Versailles">
          <div class="caption">Cozy paris eatery</div>
          <div class="source">Unsplash</div>
        </div>
        <div class="card short">
          <img src="https://plus.unsplash.com/premium_photo-1697729582646-a5d923464b30?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="loire valley">
          <div class="caption">Cozy paris eatery</div>
          <div class="source">Unsplash</div>
        </div>
        <div class="card tall">
          <img src="https://images.unsplash.com/photo-1620679393872-2501651282c1?q=80&w=2187&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="wine">
          <div class="caption">Cozy paris eatery</div>
          <div class="source">Unsplash</div>
        </div>
        <div class="card tall">
          <img src="https://images.unsplash.com/photo-1708793870276-9d529dce1288?q=80&w=1588&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="wine">
          <div class="caption">Cozy paris eatery</div>
          <div class="source">Unsplash</div>
        </div>
        <div class="card tall">
          <img src="https://plus.unsplash.com/premium_photo-1724604871348-298594ad4eed?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8Y2hhbW9uaXh8ZW58MHx8MHx8fDA%3D" alt="Chamonix">
          <div class="caption">Cozy paris eatery</div>
          <div class="source">Unsplash</div>
        </div>
        <div class="card tall">
          <img src="https://images.unsplash.com/photo-1604440401661-8f6f07c285a2?q=80&w=2163&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="nice">
          <div class="caption">Cozy paris eatery</div>
          <div class="source">Unsplash</div>
        </div>
        <div class="card tall">
          <img src="https://images.unsplash.com/photo-1504459257750-a6dc59581529?q=80&w=1920&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="">
          <div class="caption">Cozy paris eatery</div>
          <div class="source">Unsplash</div>
        </div>
        <div class="card tall">
          <img src="https://images.unsplash.com/photo-1575218283431-a91baee79f47?q=80&w=1990&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Arles">
          <div class="caption">Cozy paris eatery</div>
          <div class="source">Unsplash</div>
        </div>
        <div class="card tall">
          <img src="https://images.unsplash.com/photo-1616091216791-a5360b5fc78a?q=80&w=1990&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Paris">
          <div class="caption">Cozy paris eatery</div>
          <div class="source">Unsplash</div>
        </div>
      </div>
    </div>
  </body>
  
  <script>
    const overlay = document.querySelector('#overlay');
    const cards = document.querySelectorAll('.card');
    let activated = false;

    for (const card of cards) {
      card.addEventListener('click', (evt) => {
        evt.preventDefault();
        const overlay = document.querySelector('#overlay');
        overlay.classList.remove('hide');
        const scroller = overlay.querySelector('.scroller');
        scroller.scrollIntoView();
        activated = false;
        scroller.querySelector('img').setAttribute('src', card.querySelector('img').getAttribute('src'));
        scroller.querySelector('.caption').textContent = card.querySelector('.caption').textContent;
        scroller.querySelector('.source').textContent = card.querySelector('.source').textContent;
      });
    }
    function closeSheet() {
      // TODO: Animate to in-page location.
      overlay.classList.add('hide');
      activated = false;
    }
    overlay.addEventListener('scrollsnapchange', (evt) => {
      if (activated && evt.snapTargetBlock && evt.snapTargetBlock.classList.contains('dismiss')) {
        closeSheet();
      }
      activated = true;
    });
  </script>
</html>

